# תוכנית בדיקות — כלכלת הבית

## מילוי Mock Data
להזרמת נתוני מבחן למשק הבית של משתמש ספציפי:
```bash
# Windows PowerShell
$env:SEED_EMAIL="hitzhak@cambium.co.il"; npm run seed:mock

# Linux/Mac
SEED_EMAIL=hitzhak@cambium.co.il npm run seed:mock
```
או להגדיר `HOUSEHOLD_ID` ישירות. בלעדיהם — ימולא משק הבית הראשון.

---

## סקירה
מסמך זה מגדיר את תוכנית הבדיקות המלאה לאפליקציית ניהול תקציב משפחתי "כלכלת הבית", על סמך הלוגיקה העסקית והקוד.

---

## 1. בדיקות התחברות (Authentication)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 1.1 | התחברות מוצלחת | גלוש ל-/login, הזן hitzhak@cambium.co.il + סיסמה, לחץ התחבר | הפניה ל-Dashboard (/) |
| 1.2 | אימייל שגוי | הזן אימייל לא קיים | הודעת שגיאה בעברית |
| 1.3 | סיסמה שגויה | הזן סיסמה לא נכונה | הודעת שגיאה בעברית |
| 1.4 | שדות ריקים | השאר אימייל/סיסמה ריקים | ולידציה לפני שליחה |
| 1.5 | קישור הרשמה | לחץ "הרשם כאן" | מעבר למצב הרשמה |

---

## 2. דשבורד (Dashboard)

| # | תרחיש | צעדים | תוצר צפוי |
|---|--------|------|-----------|
| 2.1 | טעינת דשבורד | התחבר → גלוש ל-/ | נתונים: הכנסות, הוצאות, מאזן, תקציב |
| 2.2 | סיכום תקציב | בדוק את Hero | סכום הכנסות, הוצאות קבועות/משתנות, נותר |
| 2.3 | התראות תקציב | קטגוריה בעלת ניצול ≥80% | התראה (info/warning/error) |
| 2.4 | עסקאות אחרונות | גלול לחלק "עסקאות אחרונות" | רשימת עסקאות אחרונות |
| 2.5 | ניווט חודש | שנה חודש/שנה | נתונים מתעדכנים לפי החודש הנבחר |
| 2.6 | מצב ריק | משק בית ללא נתונים | מסך "ברוך הבא" + קישורים להגדרה |

---

## 3. עסקאות (Transactions)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 3.1 | צפייה בעסקאות | גלוש ל-/transactions | רשימת עסקאות לפי חודש |
| 3.2 | הוספת הוצאה | לחץ + → בחר הוצאה, קטגוריה, סכום, תאריך | עסקה מופיעה ברשימה |
| 3.3 | הוספת הכנסה | לחץ + → בחר הכנסה, קטגוריה, סכום | עסקה מופיעה ברשימה |
| 3.4 | עריכת עסקה | לחץ על עסקה → ערוך סכום/קטגוריה | עדכון ברשימה |
| 3.5 | מחיקת עסקה | לחץ מחיקה | העסקה נמחקת |
| 3.6 | עסקה קבועה | סמן "קבוע" | מסומנת כקבועה, מופיעה בדשבורד נכון |
| 3.7 | ניווט חודש/שנה | שנה חודש בעמודת העסקאות | עסקאות החודש הנבחר |
| 3.8 | חישוב שבוע | עסקה משתנה | weekNumber 1–5 לפי יום בחודש |

---

## 4. תקציב (Budget / Settings)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 4.1 | צפייה בתקציב | גלוש ל-/settings → תקציב | רשימת קטגוריות + סכום מתוכנן |
| 4.2 | עדכון תקציב | שנה סכום מתוכנן לקטגוריה | נשמר ומתעדכן בדשבורד |
| 4.3 | העתקה מחודש קודם | לחץ "העתק מחודש קודם" | תקציב החודש הקודם מועתק |
| 4.4 | התראות תקציב | ניצול ≥80%/95%/100% | התראות ברמות שונות |

---

## 5. דוחות (Reports)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 5.1 | דוח חודשי | גלוש ל-/reports → דוח חודשי | גרפים + פירוט לפי קטגוריות |
| 5.2 | תקציב מול ביצוע | דוח "תקציב מול ביצוע" | השוואה מתוכנן vs בפועל |
| 5.3 | השוואת חודשים | דוח השוואת חודשים | נתונים בין חודשים |
| 5.4 | מגמות | דוח מגמות (6/12/18/24 חודשים) | גרפים לפי טווח |
| 5.5 | חיסכון והלוואות | דוח חיסכון והלוואות | סיכום מטרות + הלוואות |
| 5.6 | ייצוא Excel/PDF | לחץ ייצוא | קובץ יורד |

---

## 6. חיסכון (Savings)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 6.1 | צפייה במטרות | גלוש ל-/savings | רשימת מטרות חיסכון |
| 6.2 | הוספת מטרה | לחץ הוסף → שם, מטרה, תאריך | מטרה חדשה ברשימה |
| 6.3 | הפקדה | הוסף הפקדה למטרה | סכום נוכחי מתעדכן |
| 6.4 | התקדמות | בדוק progress bar | אחוז השגה נכון |
| 6.5 | מחיקה | מחק מטרה | המטרה נמחקת |

---

## 7. הלוואות (Loans)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 7.1 | צפייה בהלוואות | גלוש ל-/loans | רשימת הלוואות |
| 7.2 | הוספת הלוואה | לחץ הוסף → פרטים | הלוואה חדשה ברשימה |
| 7.3 | תשלום | רשום תשלום | יתרה מתעדכנת |
| 7.4 | היסטוריית תשלומים | פתח הלוואה | רשימת תשלומים |

---

## 8. הגדרות (Settings)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 8.1 | יום משכורת | שנה יום משכורת | נשמר |
| 8.2 | ניהול קטגוריות | הפעל/כבה קטגוריות | שינוי נשמר |
| 8.3 | גיבוי | לחץ גיבוי | קובץ JSON יורד |
| 8.4 | שחזור | העלה קובץ גיבוי | נתונים משוחזרים |
| 8.5 | איפוס נתונים | איפוס | כל הנתונים נמחקים |

---

## 9. משפחה (Family)

| # | תרחיש | צעדים | תוצאה צפויה |
|---|--------|------|-------------|
| 9.1 | צפייה בחברים | גלוש ל-/family | רשימת חברי משק הבית |
| 9.2 | יצירת הזמנה | לחץ הזמנה | קישור הזמנה נוצר |
| 9.3 | קישור הזמנה | גלוש ל-/invite/[token] | אפשרות לקבל ההזמנה |

---

## 10. חישובים (Calculations)

| # | לוגיקה | בדיקה |
|---|--------|--------|
| 10.1 | סה"כ הכנסות | סכום כל עסקאות INCOME בחודש |
| 10.2 | סה"כ הוצאות | סכום כל עסקאות EXPENSE בחודש |
| 10.3 | מאזן | הכנסות − הוצאות |
| 10.4 | הוצאות קבועות | סכום עסקאות isFixed=true |
| 10.5 | הוצאות משתנות | הוצאות − קבועות |
| 10.6 | ניצול תקציב | (הוצאה בפועל / מתוכנן) × 100 |
| 10.7 | שבוע 1–5 | יום 1–7=1, 8–14=2, 15–21=3, 22–28=4, 29–31=5 |

---

## 11. סינכרון נתונים (Mock Data Validation)

| # | בדיקה | תוצאה צפויה |
|---|--------|-------------|
| 11.1 | הכנסות = סכום עסקאות INCOME | התאמה בדשבורד |
| 11.2 | הוצאות = סכום עסקאות EXPENSE | התאמה בדשבורד |
| 11.3 | מאזן = הכנסות − הוצאות | התאמה בדשבורד |
| 11.4 | תקציב vs ביצוע | סכום תקציבי ≈ סכום הוצאות בפועל לקטגוריות |
| 11.5 | מטרות חיסכון | currentAmount = סכום הפקדות |
| 11.6 | הלוואות | remainingAmount מתעדכן אחרי תשלומים |

---

## 12. ניווט ו-UI

| # | תרחיש | תוצאה צפויה |
|---|--------|-------------|
| 12.1 | תפריט נגיש | כל הדפים נגישים מהתפריט |
| 12.2 | RTL | ממשק מימין לשמאל |
| 12.3 | דף מדריך | /guide נטען |
| 12.4 | דף offline | /offline נטען במצב offline |

---

## סדר ביצוע מומלץ

1. **התחברות** (1.1)
2. **דשבורד** (2.1–2.6)
3. **עסקאות** (3.1–3.8)
4. **תקציב** (4.1–4.4)
5. **דוחות** (5.1–5.6)
6. **חיסכון** (6.1–6.5)
7. **הלוואות** (7.1–7.4)
8. **הגדרות** (8.1–8.5)
9. **משפחה** (9.1–9.3)
10. **מדריך / offline** (12.3–12.4)

---

## תוצאות ריצה (20.2.2026)

| קטגוריה | סטטוס | הערות |
|---------|--------|-------|
| התחברות (1.1) | ✅ | hitzhak@cambium.co.il — התחברות מוצלחת |
| דשבורד (2) | ✅ | הכנסות/הוצאות/מאזן/תקציב מסונכרנים, עסקאות אחרונות, התראות |
| עסקאות (3) | ✅ | הכנסות ₪26,575, הוצאות ₪17,876, מאזן +₪8,699 (ינואר 2026) |
| תקציב (4) | ✅ | הגדרות → תקציב: סה"כ ₪24,398, קטגוריות מוגדרות |
| דוחות (5) | ✅ | דוח חודשי, ייצוא Excel/PDF, טאבים (תקציב/השוואה/מגמות/חיסכון-הלוואות) |
| חיסכון (6) | ✅ | דף /savings מלא — מטרות חיסכון + הלוואות |
| הלוואות (7) | ✅ | נתונים בדוח — משכנתא + הלוואת בנק |
| הגדרות (8) | ✅ | יום משכורת, תקציב, קטגוריות, גיבוי/שחזור |
| משפחה (9) | ✅ | "הבית שלי", בעלים, כפתור "הזמן חבר" |
| מדריך (12) | ✅ | מדריך שימוש מלא, טיפים |
